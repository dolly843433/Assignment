<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>CUSTOMER  UPDATE</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>

      $(document).ready(function() {
        var arr=window.location.search.split("=");
        var id=arr[1];
        var token="Bearer "+localStorage.getItem("token");
           $.ajax({
               url: "http://localhost:9094/find/"+id,
               type: "GET",
               headers:{
                 "Authorization":token
               },
               dataType: "json",
               success: function(response) {

                var form = document.getElementById("myForm");
                form.elements["customer_id"].value=response.customer_id;
                form.elements["FirstName"].value=response.firstName;
                form.elements["LastName"].value=response.lastName;
                form.elements["Address"].value=response.adress;
                form.elements["State"].value=response.state;
                form.elements["City"].value=response.city;
                form.elements["Email"].value=response.email;
                form.elements["phone"].value=response.phone;
               },
               error: function(error) {
                   console.log("Error: " + error.responseText);
               }
           });
   });

      $(document).ready(function() {
          $("#myForm").submit(function(event) {
              event.preventDefault();

              var formData = {
                firstName:  $("#FirstName").val(),
                lastName: $("#LastName").val(),
                adress: $("#Address").val(),
                state: $("#State").val(),
                city: $("#City").val(),
                email: $("#Email").val(),
                phone: $("#phone").val(),
                
              };
              var arr=window.location.search.split("=");
              var id=arr[1];
              var token="Bearer "+localStorage.getItem("token");
              $.ajax({
                  url: "http://localhost:9094/update/"+id,
                  type: "PUT",
                  headers:{
                    "Authorization":token
                  },
                  data: JSON.stringify(formData),
                  contentType: "application/json",
                  dataType: "text",
                  success: function(response) {
                      window.location.href="CustomerList.html";
                  },
                  error: function(error) {
                      console.log("Error: " + error.responseText);
                  }
              });
          });
      });
  </script>
  </head>
  <body>
    <!--[if lt IE 7]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
    
    <div class="container py-5 customer-inner">
      <h2 class="display-4 pb-4 fw-bold text-center text-primary">CUSTOMER  UPDATE</h2>
  </div>
   <div class="container w-50">
    <form action="" id="myForm">
        <div class="mb-3 px-5">
            <label for="customer_id" class="form-label">Email_id</label>
            <input type="customer_id" class="form-control" id="customer_id" name="customer_id" readonly>
          </div>
          
          <div class="mb-3 px-5">
            <label for="FirstName" class="form-label"> FirstName </label>
            <input type="FirstName" class="form-control" id="FirstName"   name="FirstName">
          </div>
          <div class="mb-3 px-5">
              <label for="LastName" class="form-label">LastName </label>
              <input type="LastName" class="form-control" id="LastName"   name="LastName">
              </div>
              <div class="mb-3 px-5">
                  <label for="Address" class="form-label">Address</label>
                  <input type="Address" class="form-control" id="Address"   name="Address">
                  </div>
                  <div class="mb-3 px-5">
                      <label for="State" class="form-label">State</label>
                      <input type="State" class="form-control" id="State"  name="State">
                      </div>  

                      <div class="mb-3 px-5">
                        <label for="City" class="form-label">City</label>
                        <input type="City" class="form-control" id="City"  name="City">
                        </div>  
                        <div class="mb-3 px-5">
                            <label for="Email" class="form-label">Email</label>
                            <input type="Email" class="form-control" id="Email"  name="Email">
                            </div>  

                            <div class="mb-3 px-5">
                                <label for="phone">phone</label>
                                <input id="phone" class="null card-image form-control" type="number"  maxlength="12" name="phone">
                            </div>
                            <div class="mb-3 px-5">
                               <button type="submit" class="btn btn-primary">Update</button>
                            </div>  
                            <div class="mb-3 px-5">
                              <a href="CustomerList.html">Go Back</a>
                            </div>  

       </form>  
   </div>    
  </body>
</html>